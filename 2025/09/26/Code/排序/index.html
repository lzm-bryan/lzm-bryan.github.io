<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>排序 | Zhiming Liang Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="（正文内容从这里开始…） 快速排序import random  def partition(nums, start, end):     &quot;&quot;&quot;填坑法分区：返回枢轴落点索引&quot;&quot;&quot;     pivot &#x3D; nums[start]          # 也可随机：p &#x3D; random.randint(start, end)">
<meta property="og:type" content="article">
<meta property="og:title" content="排序">
<meta property="og:url" content="https://lzm-bryan.github.io/2025/09/26/Code/%E6%8E%92%E5%BA%8F/">
<meta property="og:site_name" content="Zhiming Liang Blog">
<meta property="og:description" content="（正文内容从这里开始…） 快速排序import random  def partition(nums, start, end):     &quot;&quot;&quot;填坑法分区：返回枢轴落点索引&quot;&quot;&quot;     pivot &#x3D; nums[start]          # 也可随机：p &#x3D; random.randint(start, end)">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-09-26T13:44:43.329Z">
<meta property="article:modified_time" content="2025-10-17T04:37:13.223Z">
<meta property="article:author" content="Zhiming Liang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Zhiming Liang Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<!-- hexo injector head_end start -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="76e5f803-792d-44df-8739-59390a6435b7"></script>
  <!-- hexo injector head_end end --><meta name="generator" content="Hexo 8.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Zhiming Liang Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Notes &amp; Life</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://lzm-bryan.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Code/排序" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/26/Code/%E6%8E%92%E5%BA%8F/" class="article-date">
  <time class="dt-published" datetime="2025-09-26T13:44:43.329Z" itemprop="datePublished">2025-09-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E4%BB%A3%E7%A0%81/">代码</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      排序
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>（正文内容从这里开始…）</p>
<h1 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h1><pre class="line-numbers language-none"><code class="language-none">import random

def partition(nums, start, end):
    &quot;&quot;&quot;填坑法分区：返回枢轴落点索引&quot;&quot;&quot;
    pivot &#x3D; nums[start]          # 也可随机：p &#x3D; random.randint(start, end); nums[start], nums[p] &#x3D; nums[p], nums[start]
    left, right &#x3D; start, end
    while left &lt; right:
        # 右侧先找 &lt; pivot 的
        while left &lt; right and nums[right] &gt;&#x3D; pivot:
            right -&#x3D; 1
        nums[left] &#x3D; nums[right]     # 右边的小填到左坑

        # 左侧再找 &gt; pivot 的
        while left &lt; right and nums[left] &lt;&#x3D; pivot:
            left +&#x3D; 1
        nums[right] &#x3D; nums[left]     # 左边的大填到右坑

    nums[left] &#x3D; pivot               # 枢轴就位
    return left

def quicksort(nums, l&#x3D;0, r&#x3D;None):
    &quot;&quot;&quot;原地快速排序（递归）&quot;&quot;&quot;
    if r is None:
        r &#x3D; len(nums) - 1
    if l &gt;&#x3D; r:
        return
    mid &#x3D; partition(nums, l, r)
    quicksort(nums, l, mid - 1)
    quicksort(nums, mid + 1, r)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">def quicksort(nums, start, end):
    &quot;&quot;&quot;原地快速排序（递归）&quot;&quot;&quot;
    if start &gt;&#x3D; end:
        return

    pivot &#x3D; nums[start]
    left, right &#x3D; start, end

    # 分区：右找小填左坑，左找大填右坑
    while left &lt; right:
        while left &lt; right and nums[right] &gt;&#x3D; pivot:
            right -&#x3D; 1
        if left &lt; right:
            nums[left] &#x3D; nums[right]
        while left &lt; right and nums[left] &lt;&#x3D; pivot:
            left +&#x3D; 1
        if left &lt; right:
            nums[right] &#x3D; nums[left]

    nums[left] &#x3D; pivot  # 枢轴就位
    quicksort(nums, start, left - 1)
    quicksort(nums, left + 1, end)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>912是排序数组 要求nlogn<br>改进版本快排</p>
<pre class="line-numbers language-none"><code class="language-none">class Solution:
    def sortArray(self, nums: List[int]) -&gt; List[int]:
        def quicksort(nums, start, end):
            &quot;&quot;&quot;原地快速排序（递归）&quot;&quot;&quot;
            if start &gt;&#x3D; end:
                return

            # pivot &#x3D; nums[start]
            pivot &#x3D; nums[random.randint(start, end)]
            left, right &#x3D; start, end
            scan &#x3D; left
            # 分区：右找小填左坑，左找大填右坑
            while scan &lt;&#x3D; right:
                if nums[scan] &lt; pivot:
                    nums[left], nums[scan] &#x3D; nums[scan], nums[left]
                    left &#x3D; left + 1
                    scan &#x3D; scan + 1
                elif nums[scan] &gt; pivot:
                    nums[right], nums[scan] &#x3D; nums[scan], nums[right]
                    right &#x3D; right - 1
                else:
                    scan &#x3D; scan + 1

            quicksort(nums, start, left - 1)
            quicksort(nums, right + 1, end)
        
        if len(nums) &lt;&#x3D; 1:
            return nums
        quicksort(nums, 0, len(nums) - 1)
        return nums<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这个方法会在leetcode217.存在重复元素超时<br>改进快排</p>
<pre class="line-numbers language-none"><code class="language-none">import random
from typing import List

def quicksort(a: List[int], l: int, r: int) -&gt; None:
    &quot;&quot;&quot;改进版原地快速排序（三路划分 + 随机枢轴 + 尾递归优化）&quot;&quot;&quot;
    while l &lt; r:
        # 1) 随机选择枢轴，交换到开头
        p &#x3D; random.randint(l, r)
        a[l], a[p] &#x3D; a[p], a[l]
        pivot &#x3D; a[l]

        # 2) 三路划分：[l..lt-1] &lt; pivot, [lt..gt] &#x3D;&#x3D; pivot, [gt+1..r] &gt; pivot
        lt, i, gt &#x3D; l, l + 1, r
        while i &lt;&#x3D; gt:
            if a[i] &lt; pivot:
                a[lt], a[i] &#x3D; a[i], a[lt]
                lt +&#x3D; 1
                i +&#x3D; 1
            elif a[i] &gt; pivot:
                a[i], a[gt] &#x3D; a[gt], a[i]
                gt -&#x3D; 1
            else:
                i +&#x3D; 1

        # 3) 递归较小的一侧，循环处理较大的一侧（尾递归优化）
        left_len &#x3D; lt - 1 - l
        right_len &#x3D; r - (gt + 1)
        if left_len &lt; right_len:
            if l &lt; lt - 1:
                quicksort(a, l, lt - 1)
            l &#x3D; gt + 1
        else:
            if gt + 1 &lt; r:
                quicksort(a, gt + 1, r)
            r &#x3D; lt - 1

&#96;&#96;&#96;  
# 冒泡排序<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>def bubble_sort(nums):<br>    “””原地冒泡排序；稳定。平均&#x2F;最坏 O(n^2)，最好（近乎有序）可提前终止。”””<br>    n &#x3D; len(nums)<br>    for i in range(n - 1):<br>        swapped &#x3D; False<br>        # 相邻比较与交换，内层区间逐步缩短<br>        for j in range(0, n - 1 - i):<br>            if nums[j] &gt; nums[j + 1]:<br>                nums[j], nums[j + 1] &#x3D; nums[j + 1], nums[j]<br>                swapped &#x3D; True<br>        if not swapped:  # 本轮无交换 -&gt; 已有序<br>            break<br>    return nums</p>
<pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>def selection_sort(nums):<br>    “””原地选择排序；不稳定。时间复杂度始终 O(n^2)。”””<br>    n &#x3D; len(nums)<br>    for i in range(n - 1):<br>        min_idx &#x3D; i<br>        # 在 [i+1, n) 中找最小元素的位置<br>        for j in range(i + 1, n):<br>            if nums[j] &lt; nums[min_idx]:<br>                min_idx &#x3D; j<br>        # 只在需要时交换，减少无谓交换次数<br>        if min_idx !&#x3D; i:<br>            nums[i], nums[min_idx] &#x3D; nums[min_idx], nums[i]<br>    return nums</p>
<pre class="line-numbers language-none"><code class="language-none">

# 归并排序<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>def merge_sort(nums):<br>    if len(nums) &lt;&#x3D; 1:<br>        return nums<br>    mid &#x3D; len(nums) &#x2F;&#x2F; 2<br>    left &#x3D; merge_sort(nums[:mid])<br>    right &#x3D; merge_sort(nums[mid:])<br>    return merge(left, right)</p>
<p>def merge(left, right):<br>    l, r &#x3D; 0, 0<br>    res &#x3D; []<br>    while l &lt; len(left) and r &lt; len(right):<br>        if left[l] &lt;&#x3D; right[r]:<br>            res.append(left[l])<br>            l +&#x3D; 1<br>        else:<br>            res.append(right[r])<br>            r +&#x3D; 1<br>    res.extend(left[l:])<br>    res.extend(right[r:])<br>    return res</p>
<pre><code>
</code></pre>

  <div class="post-pv" style="opacity:.8;font:14px ui-sans-serif,system-ui;margin-top:1rem">
    本文阅读：<strong class="pv-val">--</strong>
  </div>
  <script>
  (async function () {
    try {
      const ENDPOINT = '/api/umami-post?url=' + encodeURIComponent('/2025/09/26/Code/%E6%8E%92%E5%BA%8F/');
      const d = await fetch(ENDPOINT, { cache: 'no-store' }).then(r => r.json());
      document.currentScript.previousElementSibling.querySelector('.pv-val').textContent = d.page_pv ?? 0;
    } catch (e) {}
  })();
  </script>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://lzm-bryan.github.io/2025/09/26/Code/%E6%8E%92%E5%BA%8F/" data-id="cuidCQaFT33soE5x2gB7kFluB" data-title="排序" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2025/09/26/Code/%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          浅拷贝和深拷贝
        
      </div>
    </a>
  
  
    <a href="/2025/09/26/%E7%AC%AC%E4%BA%8C%E8%BD%AE%E5%A4%8D%E4%B9%A0%E8%A6%81%E7%82%B9%EF%BC%88%E8%87%AA_2025_09_13_19_16_%E8%B5%B7%EF%BC%89_%E7%BD%91%E7%BB%9C%E4%B8%8E%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hip-Hop/">Hip-Hop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BB%A3%E7%A0%81/">代码</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C/">工作</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Colab/" rel="tag">Colab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Logistic-Regression/" rel="tag">Logistic Regression</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Softmax-Regression/" rel="tag">Softmax Regression</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B0%E5%8A%A0%E5%9D%A1/" rel="tag">新加坡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8%E5%8F%A3%E8%AF%AD/" rel="tag">日常口语</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/" rel="tag">生活记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E8%B4%AD/" rel="tag">网购</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%84%E5%88%92/" rel="tag">规划</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Colab/" style="font-size: 10px;">Colab</a> <a href="/tags/Logistic-Regression/" style="font-size: 10px;">Logistic Regression</a> <a href="/tags/Softmax-Regression/" style="font-size: 10px;">Softmax Regression</a> <a href="/tags/%E6%96%B0%E5%8A%A0%E5%9D%A1/" style="font-size: 10px;">新加坡</a> <a href="/tags/%E6%97%A5%E5%B8%B8%E5%8F%A3%E8%AF%AD/" style="font-size: 20px;">日常口语</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/" style="font-size: 10px;">生活记录</a> <a href="/tags/%E7%BD%91%E8%B4%AD/" style="font-size: 10px;">网购</a> <a href="/tags/%E8%A7%84%E5%88%92/" style="font-size: 10px;">规划</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/10/">十月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/09/">九月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/08/">八月 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/10/27/%E5%B7%A5%E4%BD%9C/table/">时间表</a>
          </li>
        
          <li>
            <a href="/2025/10/23/%E4%BB%A3%E7%A0%81/input/">ACM type input</a>
          </li>
        
          <li>
            <a href="/2025/10/21/%E5%86%99%E4%BD%9C/2025-10-20/">写作</a>
          </li>
        
          <li>
            <a href="/2025/10/18/%E5%86%99%E4%BD%9C/2025-10-18/">写作</a>
          </li>
        
          <li>
            <a href="/2025/10/02/%E6%9D%82%E8%B0%88/%E5%88%86%E6%95%B0/">分数</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Zhiming Liang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
<!-- hexo injector body_end start -->
  <!-- Busuanzi -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <script>
    (function () {
      function run() {
        if (window.BUSUANZI && typeof BUSUANZI.fetch === 'function') BUSUANZI.fetch();
      }
      if (document.readyState === 'complete') run();
      else window.addEventListener('load', run);
      document.addEventListener('pjax:complete', run);
      document.addEventListener('ajax:loaded', run);
      document.addEventListener('swup:contentReplaced', run);
    })();
  </script>

  <div id="hero-counter" style="position:fixed;top:12px;right:14px;z-index:9999;background:rgba(0,0,0,.35);color:#fff;padding:4px 8px;border-radius:6px;font:14px ui-sans-serif,system-ui;opacity:.95">
    访客：<strong id="hero_uv">--</strong>　浏览：<strong id="hero_pv">--</strong>
  </div>
  <script>
  (async function () {
    // 你的 API 域名（不要结尾斜杠）
    const ENDPOINT_BASE = 'https://lzm-bryan-github-io.vercel.app';
    const url = (p) => ENDPOINT_BASE + p;

    try {
      const d = await fetch(url('/api/umami-stats'), { cache: 'no-store' }).then(r => r.json());
      document.getElementById('hero_uv').textContent = d.site_uv ?? 0;
      document.getElementById('hero_pv').textContent = d.site_pv ?? 0;
    } catch (e) {
      document.getElementById('hero_uv').textContent = '服务异常';
      document.getElementById('hero_pv').textContent = '服务异常';
    }
  })();
  </script>
<!-- hexo injector body_end end --></body>
</html>